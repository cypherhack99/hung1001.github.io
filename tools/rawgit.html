<!DOCTYPE html>
<html>

<head>
    <title>Github to JSDelivr</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport' />
    <script src="//hhcdn.github.io/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//hhcdn.github.io/bootstrap/4/css/bootstrap.min.css">
    <link rel="shortcut icon" href="//www.google.com/s2/favicons?domain=https://www.jsdelivr.com">
    <style type="text/css">
    .intro {
        margin: 1em 0;
    }

    .main {
        margin: 1.5em 0;
    }

    .jsDelivr,
    .ex {
        margin: 1.5em 0;
    }

    .jsDelivr>img {
        margin: 0 0 10px;
    }

    .git .head {
        display: flex;
        align-items: center;
        margin: 0 0 .5em;
    }

    .git .head span {
        font-size: 1.3em;
        font-weight: 500;
        display: inline-block;
        margin: 0 0 0 6px;
    }

    .ex ul li {
        word-break: break-all;
    }

    .gitlink.invalid {
        border-color: #ffaf86;
        box-shadow: 0 0 0 0.2rem rgba(234, 121, 55, 0.25);
    }

    .footer {
        padding: 1em 0;
        border-top: 1px solid #eaeaea;
    }

    .embed-label {
        display: inline-block;
        margin: 10px 0;
    }
    </style>
    <script async="async" src="/assests/js/analytics.js?id=UA-113310556-1"></script>
    <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];

    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-113310556-1');
    </script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-xl-12 col-sm-12 col-md-12">
                <div class="head">
                    <h1 class="text-center intro">Migrating from GitHub to jsDelivr</h1>
                    <p class="text-center">
                        <legend>jsDelivr is a free, fast, and reliable Open Source CDN for npm and GitHub.
                            Most GitHub links can be easily converted to jsDelivr links.</legend>
                    </p>
                </div>
                <div class="main">
                    <div class="git">
                        <div class="head">
                            <img src="//i.imgur.com/jbCwXbB.png" width="25" height="25"> <span>Github</span>
                        </div>
                        <div class="form-group row">
                            <div class="col-lg-12 col-xl-12 col-sm-12 col-md-12">
                                <input type="text" class="form-control gitlink" id="g" placeholder="Github file URL">
                            </div>
                        </div>
                    </div>
                    <div class="jsDelivr">
                        <img src="//i.imgur.com/drtug7D.png">
                        <div class="form-group row">
                            <div class="col-lg-12 col-xl-12 col-sm-12 col-md-12">
                                <div class="row">
                                    <div class="col-lg-10 col-xl-10 col-sm-10 col-md-10">
                                        <input type="text" class="form-control" id="o" placeholder="Direct link with lastest commit" readonly="">
                                    </div>
                                    <div class="col-lg-2 col-xl-2 col-sm-2 col-md-2">
                                        <button class="btn btn-success" id="c1">COPY</button>
                                        <button class="btn btn-primary" id="t1">TEST</button>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-lg-10 col-xl-10 col-sm-10 col-md-10">
                                        <input type="text" class="form-control" id="m" placeholder="Direct link without lastest commit" readonly="">
                                    </div>
                                    <div class="col-lg-2 col-xl-2 col-sm-2 col-md-2">
                                        <button class="btn btn-success" id="c2">COPY</button>
                                        <button class="btn btn-primary" id="t2">TEST</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="embed">
                        <span class="embed-label"><strong>Embedded code</strong></span>
                        <div class="form-group row">
                            <div class="col-lg-12 col-xl-12 col-sm-12 col-md-12">
                                <div class="row">
                                    <div class="col-lg-10 col-xl-10 col-sm-10 col-md-10">
                                        <input type="text" class="form-control" id="n" placeholder="Embedded code with lastest commit" readonly="">
                                    </div>
                                    <div class="col-lg-2 col-xl-2 col-sm-2 col-md-2">
                                        <button class="btn btn-success" id="c3">COPY</button>
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-lg-10 col-xl-10 col-sm-10 col-md-10">
                                        <input type="text" class="form-control" id="p" placeholder="Embedded code without lastest commit" readonly="">
                                    </div>
                                    <div class="col-lg-2 col-xl-2 col-sm-2 col-md-2">
                                        <button class="btn btn-success" id="c4">COPY</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btngroup">
                    <button class="btn btn-danger" id="r">RESET</button>
                </div>
                <div class="ex">
                    <h5>Valid URL</h5>
                    <ul>
                        <li>Github file URL: <b>https://github.com/hhcdn/hhcdn.github.io/blob/master/jquery/dist/jquery.min.js</b></li>
                        <li>Github file URL: <b>https://github.com/hhcdn/hhcdn.github.io/raw/master/jquery/dist/jquery.min.js</b></li>
                        <li>Github file URL: <b>https://github.com/hhcdn/hhcdn.github.io/blame/master/jquery/dist/jquery.min.js</b></li>
                        <li>Github raw file URL: <b>https://raw.githubusercontent.com/hhcdn/hhcdn.github.io/master/jquery/dist/jquery.min.js</b></li>
                    </ul>
                </div>
                <div class="footer text-center">
                    @ <span class="year"></span> by Hung1001
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    const giturl = /^https?:\/\/github\.com\/(.+?)\/(.+?)\/(?!releases\/)(?:(?:blob|raw|blame)\/)?(.+?)\/(.+)/i,
        rawgit = /^https?:\/\/raw\.github(?:usercontent)?\.com\/(.+?)\/(.+?)\/(.+?)\/(.+)/i;
    (function(doc) {
        doc.getElementsByClassName("gitlink")[0].focus();
        doc.getElementsByClassName("year")[0].innerHTML = new Date().getFullYear();

        function a() {
            var t = $(".gitlink").val();
            let e = t.match(giturl),
                i = t.match(rawgit);

            function n(e, i) {
                $(".gitlink").removeClass("invalid");
                let n = `https://api.github.com/repos/${i[1]}/${i[2]}/commits/${i[3]}`;
                $.ajax({
                    url: n,
                    type: "GET",
                    dataType: "json",
                    success: function(i) {
                        var n = i.sha,
                            c = t.replace(e, `https://cdn.jsdelivr.net/gh/$1/$2@${n}/$4`),
                            d = t.replace(e, `https://cdn.jsdelivr.net/gh/$1/$2/$4`);
                        $("#o").val(c);
                        $("#m").val(d);
                        var l = t.split("/").pop();
                        l.indexOf(".js") > -1 && ($("#n").val('<script src="' + c + '" type="text/javascript"><\/script>'), $("#p").val('<script src="' + d + '" type="text/javascript"><\/script>'));
                        l.indexOf(".css") > -1 && ($("#n").val('<link href="' + c + '" rel="stylesheet" type="text/css"/>'), $("#p").val('<link href="' + d + '" rel="stylesheet" type="text/css"/>'));
                        (l.indexOf(".png") > -1 || l.indexOf(".jpg") > -1 || l.indexOf(".gif") > -1 || l.indexOf(".svg") > -1) && ($("#n").val('<img src="' + c + '">'), $("#p").val('<img src="' + d + '">'));
                    }
                })
            }
            giturl.test(t) ? n(giturl, e) : rawgit.test(t) ? n(rawgit, i) : $(".gitlink").addClass("invalid")
        }

        function b(id) {
            doc.getElementById(id).value.length > 0 ? (doc.getElementById(id).select(), doc.execCommand("copy")) : alert("Nothing to copy !")
        }

        function c(id) {
            doc.getElementById(id).value.length > 0 ? window.open(doc.getElementById(id).value) : (alert("Nothing to test !"))
        }
        doc.getElementById("r").addEventListener("click", function() {
            doc.getElementById("g").focus();
            var a = doc.querySelectorAll("#g,#o,#m,#n,#p");
            for (var i = 0; i < a.length; i++) {
                a[i].value = "";
            };
        })
        doc.getElementById("c1").addEventListener("click", function() {
            b("o");
        })
        doc.getElementById("c2").addEventListener("click", function() {
            b("m");
        })
        doc.getElementById("c3").addEventListener("click", function() {
            b("n");
        })
        doc.getElementById("c4").addEventListener("click", function() {
            b("p");
        })
        doc.getElementById("t1").addEventListener("click", function() {
            c("o");
        })
        doc.getElementById("t2").addEventListener("click", function() {
            c("m");
        })
        doc.getElementById("g").addEventListener("input", a)
    })(document);
    </script>
</body>

</html>